<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <canvas id="canvas" width="400" height="400" style="border:  1px solid black;"></canvas>
</body>
<script>
    const canvas = document.getElementById('canvas');

    const ctx = canvas.getContext('2d');

    // draw a line between point a and b.
    function drawLine(a, b) {
        // ctx.setLineDash([5,5]);
        ctx.beginPath();
        ctx.moveTo(a.x, a.y);
        ctx.lineTo(b.x, b.y);
        ctx.stroke();
    }

    function midPoint(a, b) {
        return {
            x: (b.x + a.x) / 2,
            y: (b.y + a.y) / 2,
        }
    }

    function bez(a, b) {
        ctx.setLineDash([5, 5]);
        const c = { x: b.x, y: a.y };
        // point(midab);
        // drawLine(a, mid);
        drawLine(a, c);
        drawLine(c, b);

        // const d = Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2))

        const dx = b.x - a.x;
        const dy = b.y - a.y;
        const step = Math.max(Math.abs(dx), Math.abs(dy)) / 5;

        for (let j = 0; j < step; j += 1) {
            let i = j / step;
            const color = 255 * i;
            ctx.fillStyle = `rgb(128 0 ${color})`;
            const p1 = lerp(a.x, c.x, i);
            const p2 = lerp(c.y, b.y, i);
            // point({x:p1, y: a.y});
            // point({x:b.x, y: p2});
            const lpx = lerp(p1, b.x, i);
            const lpy = lerp(a.y, p2, i);
            point({ x: lpx, y: lpy })

        }
    }

    // a function to lerp value between two points
    function lerp(a, b, t) {
        return a + (b - a) * t;
    }


    function point(p) {
        ctx.fillRect(p.x - 2, p.y - 2, 5, 5);
    }

    window.addEventListener('mousemove', function (e) {
        ctx.clearRect(0,0,400,400);
        const a = { x: 200, y: 200 };
        const b = { x: e.clientX, y: e.clientY };
        drawLine(a, b);
        bez(a, b);
    })
</script>

</html>